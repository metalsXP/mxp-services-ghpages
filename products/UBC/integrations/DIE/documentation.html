<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-UBC docs-version-current docs-doc-page docs-doc-id-integrations/DIE/documentation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">BTP Document Information Extraction | metalsXP services</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://metalsxp.services/products/UBC/integrations/DIE/documentation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="SAP, metalsXP"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-UBC-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-UBC-current"><meta data-rh="true" property="og:title" content="BTP Document Information Extraction | metalsXP services"><meta data-rh="true" name="description" content="Intro"><meta data-rh="true" property="og:description" content="Intro"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://metalsxp.services/products/UBC/integrations/DIE/documentation"><link data-rh="true" rel="alternate" href="https://metalsxp.services/products/UBC/integrations/DIE/documentation" hreflang="en"><link data-rh="true" rel="alternate" href="https://metalsxp.services/products/UBC/integrations/DIE/documentation" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"BTP Document Information Extraction","item":"https://metalsxp.services/products/UBC/integrations/DIE/documentation"}]}</script><link rel="stylesheet" href="/assets/css/styles.e310121a.css">
<script src="/assets/js/runtime~main.ab4dbaf9.js" defer="defer"></script>
<script src="/assets/js/main.31998f3b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/mxp.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/mxp.png" alt="mXP" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32"><img src="/img/mxp.png" alt="mXP" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32"></div><b class="navbar__title text--truncate">services</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/products/UBC">UBC</a><a class="navbar__item navbar__link" href="/products/mdVC">mdVC</a><a class="navbar__item navbar__link" href="/products/QPPD/GRO">QPPD-GRO</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" target="_self" href="/"><img src="/img/mxp.png" alt="mXP" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32"><img src="/img/mxp.png" alt="mXP" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32"><b>services</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/products/UBC">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/products/UBC/IO/documentation">I/O monitoring (UBC.io)</a><button aria-label="Expand sidebar category &#x27;I/O monitoring (UBC.io)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/products/UBC/REST/documentation">RESTful webservices (UBC.rest)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/products/UBC/MAP/documentation">Mapping framework (UBC.map)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/products/UBC/BO/documentation">UBC Business objects (UBC.bo)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/products/UBC/IDOC/documentation">IDOC integration (UBC.idoc)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/products/UBC/FLOW/documentation">Workflows (UBC.flow)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/products/UBC/JSON/documentation">JSON integration (UBC.json)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/products/UBC/MQTT/documentation">MQTT integration (UBC.mqtt)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/products/UBC/integrations/MES/documentation">Integrations</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/products/UBC/integrations/MES/documentation">MES Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/products/UBC/integrations/S1SEVEN/documentation">S1SEVEN</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/products/UBC/integrations/UnibrightONE/documentation">Unibright.ONE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/products/UBC/integrations/DIE/documentation">BTP Document Information Extraction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/products/UBC/integrations/O365Mail/documentation">Microsoft Mail</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/products/UBC/integrations/ADLSG2/documentation">Azure Data Lake Storage Gen2</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Integrations</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">BTP Document Information Extraction</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>BTP Document Information Extraction</h1></header>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="intro">Intro<a href="#intro" class="hash-link" aria-label="Direct link to Intro" title="Direct link to Intro">​</a></h2>
<p>The following documentation describes the implementation of the <a href="https://help.sap.com/docs/document-information-extraction/document-information-extraction/what-is-document-information-extraction?locale=en-US" target="_blank" rel="noopener noreferrer">Document Information Extraction</a> service into the UBC landscape.
The <a href="https://help.sap.com/docs/document-information-extraction/document-information-extraction/what-is-document-information-extraction?locale=en-US" target="_blank" rel="noopener noreferrer">Document Information Extraction</a> is an OCR cloud service with machine learning capabilities, running in SAPs BTP (Business Technology Platform) enviroment, that can extract text data from an unstructured document. This data can be queried in a machine-readable format to be used for further processing. The service supports multiple file formats, however we recommend using &quot;.pdf&quot; format. The service comes by default equipped with the ability to process a few standard document types, these are: invoices, purchase orders, payment advice and business cards. In case we choose to process custom document types, a few initial customizing steps are neccesary. The objects to be customized and created will be described in the sections below.</p>
<p>UBC now provides all the functionalities neccesary from processing incoming <a href="/products/UBC/integrations/O365Mail/documentation">E-Mails</a>, over sending to Document Information Extraction, checking and enriching the results, to start the post processing for the Extraction Results. All covered by a smooth cross system Workflow in SAP, <strong>without any middleware needed</strong>, controlled by UBC.</p>
<p><img decoding="async" loading="lazy" alt="Process" src="/assets/images/Process-a64b11bfeb11d03f557bdc03c580cc8c.png" width="631" height="304" class="img_ev3q"></p>
<!-- -->
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="document-information-extraction"><a href="https://help.sap.com/docs/DOCUMENT_INFORMATION_EXTRACTION?locale=en-US" target="_blank" rel="noopener noreferrer">Document Information Extraction</a><a href="#document-information-extraction" class="hash-link" aria-label="Direct link to document-information-extraction" title="Direct link to document-information-extraction">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="document-types"><a href="https://help.sap.com/docs/document-information-extraction/document-information-extraction/supported-document-types-and-file-formats?locale=en-US" target="_blank" rel="noopener noreferrer">Document Types</a><a href="#document-types" class="hash-link" aria-label="Direct link to document-types" title="Direct link to document-types">​</a></h3>
<p>Document Information Extraction comes with a few pre-delivered standard <a href="https://help.sap.com/docs/document-information-extraction/document-information-extraction/supported-document-types-and-file-formats?locale=en-US" target="_blank" rel="noopener noreferrer">document types</a>:</p>
<ul>
<li><code>invoice</code></li>
<li><code>paymentAdvice</code></li>
<li><code>purchaseOrder</code></li>
<li>... (growing, see <a href="https://help.sap.com/docs/document-information-extraction/document-information-extraction/supported-document-types-and-file-formats?locale=en-US" target="_blank" rel="noopener noreferrer">SAP Help</a>)</li>
</ul>
<p>It is also possible to choose the document type <code>custom</code> if your document is not matching to this list. An example for a <code>custom</code> document type would be <code>certificate</code>.
Choosing <code>custom</code> means:</p>
<ul>
<li>you are forced to use <a href="#schema">schema</a> and <a href="#template">template</a> configurations</li>
<li>no pre trained models available, you are responsible for training the recognition. Please see <a href="https://help.sap.com/docs/document-information-extraction/document-information-extraction/add-sample-documents-and-annotations?locale=en-US" target="_blank" rel="noopener noreferrer">SAP Help</a></li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>We suggest using standard document types wherever possible. No need for <a href="#schema">schema</a> and <a href="#template">template</a> configuration.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="schema"><a href="https://help.sap.com/docs/document-information-extraction/document-information-extraction/using-schema-configuration?locale=en-US" target="_blank" rel="noopener noreferrer">Schema</a><a href="#schema" class="hash-link" aria-label="Direct link to schema" title="Direct link to schema">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This is mandatory for <code>custom</code> <a href="#document-types">document types</a>. For standard document types, you can use the <code>SAP_*</code> schemas. Nevertheless, you are free to also create schemas for standard document types, if you want to reduce or extend the available fields for extraction.</p></div></div>
<p>A schema is a collection of potential extraction fields. This can be understood simply as empty variables that are to be filled by the extraction service. We need to define a name and type of the variables. There are only a few possible variable types, number, string, date currency and discount. More important however are the names of these variables, these are used when quering the extracted data as a key-value pair. For this we would recommend using the same name as the target fields in postprocessing, however custom mappings can also be implemented. As standard, header fields are used for data that appears only once per document, line items are to be used for tables.</p>
<p>To create a schema, go to the home page of your Document Information Extraction instance, click the settings icon on the lower left side of the screen and click on the &quot;Schema Configuration&quot; option. Here you will have the opportunity to create and maintain schemas.</p>
<p><img decoding="async" loading="lazy" alt="Schema" src="/assets/images/Schema_UBC-1057521230649de97f1d55c258988785.png" width="2158" height="1612" class="img_ev3q"></p>
<p>As for the naming convention of the schemas we would recommend to use the classic conventions of the customer. The naming convention of the schema fields should be clear and understandable. The best way is to use SAP standard descriptions or some meaningful substitute (for example purchase order number could be &quot;ebeln&quot; , &quot;po_num&quot; ).</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="template"><a href="https://help.sap.com/docs/document-information-extraction/document-information-extraction/using-template?locale=en-US" target="_blank" rel="noopener noreferrer">Template</a><a href="#template" class="hash-link" aria-label="Direct link to template" title="Direct link to template">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This is mandatory for custom <a href="#schema">schemas</a>. For standard schemas, the models are already pre-trained with a large set of data by SAP.</p></div></div>
<p>A template can be understood as a map for the extraction service to be able to find the data and fill our extraction fields (based on the assigned <a href="#schema">schema</a>) for our specific document layout.
First, an already active <a href="#schema">schema</a> needs to be assigned to a template, so make sure there is already one created and activated.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>For custom <a href="#document-types">document types</a>, we would suggest defining one schema per process. The reason for this proposal is the automatic template detection functionality of the service, which can automatically assign the correct template to the document based on its layout and schema.
So, if we have five different pdf document layouts from which we always extract the same information just from different positions, we only supply the schema, and the service assigns the correct template automatically.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>A template needs an example document to be uploaded with the same layout as the future documents to be processed.</p></div></div>
<p>On this uploaded example we can then annotate the positions of data to be extracted, each header field and line items of a table. We have to try to be as precise with the annotations as possible. Also keep in mind to choose the best sample document/documents for a template, in some cases we experienced issues if the annotated text was significantly shorter than the later in the processed documents. The results will be affected by the quality of the document layout, for example if the lines of the table are close to each other, not separated by lines can result in worse extraction results. Similarly, the image quality of the document is a factor affecting the extraction results quality if we are to use picture formats.</p>
<p>To create a template, go to the home screen of your instance of the extraction service and click the second button on the left pane called &quot;Template&quot;. Here you will have the opportunity to create maintain templates. After the uploaded example document gets processed, you can annotate the data into the schema fields. To annotate press the &quot;Annotate&quot; button and then press &quot;Edit&quot; on the upper right pane. Use your mouse to select the text data.</p>
<p><img decoding="async" loading="lazy" alt="Template" src="/assets/images/Template-ddee6e35c8b9c6fdeb860108a507ae38.png" width="3386" height="1416" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="Template2" src="/assets/images/Template_mark_results-bb6f34cfbb9c7679e9c7ef9236641c24.png" width="2434" height="1652" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="Template3" src="/assets/images/Add_to_template-40a2ec1c6efb6107e928c0d08af91e88.png" width="3246" height="1746" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>In the current version of DIE the template creation process was changed. To assign a document to the template we need to first post the document for extraction manually, assign the schema to it and process it with an empty template. After the processing is done, we need to annotate the data like before and then click on the &#x27;Add to Template&#x27; button to add it. The document will be linked to the selected template that we can activate and use.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extraction-in-die-ui---for-testing-purposes">Extraction in DIE UI - for testing purposes<a href="#extraction-in-die-ui---for-testing-purposes" class="hash-link" aria-label="Direct link to Extraction in DIE UI - for testing purposes" title="Direct link to Extraction in DIE UI - for testing purposes">​</a></h3>
<p>After we are finished with the (optional) customizing of our schemas and templates, we are ready to process documents. Each document uploaded will be processed using a schema and a template which are chosen during the upload of the document for extraction.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>For the Document Information Extraction UI, you have to assign Role Collections to the End Users in order to be able to access and navigate the UI. See <a href="https://help.sap.com/docs/document-information-extraction/document-information-extraction/role-collections" target="_blank" rel="noopener noreferrer">SAP Help</a> for details.</p></div></div>
<p>To upload a document manually for testing purposes:</p>
<ul>
<li>go to the home screen of the extraction service and click the &quot;+&quot; button on the upper right pane</li>
<li>fill out the required data, document type and schema. You can also assign a template, but it can also be detected automatically with the &quot;detect automatically&quot; option
<img decoding="async" loading="lazy" alt="Extraction" src="/assets/images/Extraction_upload-c2c7949b07b4548179c20085d2576ae7.png" width="2116" height="1756" class="img_ev3q"></li>
<li>Choose a file and press the &quot;Step2&quot; button that will show you the extraction header fields from the schema</li>
<li>Continue by pressing &quot;Step3&quot; that will show you the extraction line item fields from the schema.</li>
<li>Press &quot;Review&quot; and &quot;Confirm&quot; to finish the process.</li>
<li>The document will show up on the home screen and will have the status &quot;Pending&quot;</li>
<li>After the status changes to &quot;Ready&quot; you can examine the results</li>
<li>Click on the table entry to open the document and press &quot;Extraction Results&quot; button on the upper right pane.</li>
<li>Here you can inspect the result and correct them by pressing the &quot;Edit&quot; button.</li>
<li>After editing you will have the opportunity to confirm your changes, that also means the document will be locked and it is expected that all the extracted data is 100% correct. You will also have the option to provide your file to SAP for the chance to be included in the training of the extraction AI (this does not mean it will be included in the training data).<!-- -->
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Each extraction result field displayed also shows the &quot;Confidence&quot; of the result, which means &quot;how good&quot; the extraction is from the AI point of view. Naturally results with low confidence can have correct values and vice versa, however this is not the rule.</p></div></div>
<img decoding="async" loading="lazy" alt="Extraction" src="/assets/images/Extraction-b8569becbf8bceaaad03cda9d8a446c2.png" width="3196" height="1418" class="img_ev3q"></li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ubc">UBC<a href="#ubc" class="hash-link" aria-label="Direct link to UBC" title="Direct link to UBC">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="trigger">Trigger<a href="#trigger" class="hash-link" aria-label="Direct link to Trigger" title="Direct link to Trigger">​</a></h3>
<p>We offer standard integration for <a href="/products/UBC/integrations/O365Mail/documentation">E-Mail</a> by scanning an O365 Mailbox. Basically the Document Information Extraction process/workflow starts by receiving a &quot;file&quot;. As we offer standardized APIs, any custom process can trigger the Document Information Extraction and evaluate the results:</p>
<ul>
<li>trigger by incoming E-Mail</li>
<li>trigger by file on a share</li>
<li>...any other custom process...</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>For not using the standard E-Mail integration, just skip the Mail specific steps during <a href="#use-case-setup">setup</a>. You are free to trigger Document Information Extraction by any custom process (e.g. after reading file share) with a few lines of ABAP code.</p><div class="language-abap codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-abap codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">cast</span><span class="token plain"> /ubc/if_die_bo_mail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> /ubc/cl_bo_factory</span><span class="token token-operator punctuation" style="color:#393A34">=&gt;</span><span class="token plain">get_instance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">-&gt;create_by_key</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> object_type </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;YOUR_UBC_OBJECT_TYPE&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">-&gt;trigger_standalone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">exporting</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        is_input       </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> attachments </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> content_bytes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> xstring</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                           content_type </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/pdf&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                           </span><span class="token keyword" style="color:#00009f">name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;test.pdf&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                           </span><span class="token keyword" style="color:#00009f">size</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">xstrlen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> xstring</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        is_proxy_die   </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> organization_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;DIE_PROXY&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">importing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        et_message     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lt_success_message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> /ubc/cx_core </span><span class="token keyword" style="color:#00009f">into</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lx_core</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">message</span><span class="token plain"> lx_core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token eol-comment comment" style="color:#999988;font-style:italic">&quot;technical error occured</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">endtry</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre></div></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="system-setup">System Setup<a href="#system-setup" class="hash-link" aria-label="Direct link to System Setup" title="Direct link to System Setup">​</a></h3>
<p>To setup the DIE connection, we will need certain data from the <a href="https://help.sap.com/docs/service-manager/sap-service-manager/creating-service-keys-in-cloud-foundry?locale=en-US" target="_blank" rel="noopener noreferrer">service key</a> of the Document Information Extraction, this could be provided by e.g. your IT support team.
<img decoding="async" loading="lazy" alt="Service Key creation" src="/assets/images/ServiceKey-e2d6e2ee777981451c943b52a513da6f.png" width="1568" height="761" class="img_ev3q"></p>
<p>To start the setup, executing the transaction <code>/UBC/DIE_MAIL_SETUP</code> starts the task list:</p>
<ul>
<li>
<p><strong>Activate BC-Set <code>/UBC/DIE_MAIL</code></strong>
This step is needed to setup the initial customizing. It is only intended to execute on development/customizing system. Please make sure to have an open customizing request handy.</p>
</li>
<li>
<p><strong>Configure Office 365 proxy</strong>
As mentioned alredy, we offer a standard integration for scanning a Mailbox and transmitting new E-Mails (its attachments) to Document Information Extraction. This step is needed on every system/client for setting up the Connection to <a href="/products/UBC/integrations/O365Mail/documentation">Microsoft Mail/O365</a>. The connection settings are not transported. You are free to transport <code>R3TR TABU /UBC/PROXY</code>, if needed.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Skip this step if no E-Mail integration is needed</p></div></div>
</li>
<li>
<p><strong>Configure Document Extraction Information proxy</strong>
This step is needed on every system/client for setting up the Connection to Document Information Extraction. The connection settings are not transported. You are free to transport <code>R3TR TABU /UBC/PROXY</code>, if needed.<br>
<!-- -->Please use the mapping exapmle below to map the correct fields into the fields of the task list parameters that will set up the connection customizing automatically.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{Endpoint}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;html5-apps-repo&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;app_host_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;uaa&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;tenantmode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;sburl&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;subaccountid&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;credential-type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;clientid&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{Client ID}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;xsappname&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;clientsecret&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{Client Secret}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{Identity Endpoint}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;uaadomain&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;verificationkey&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;apiurl&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;identityzone&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;identityzoneid&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;tenantid&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;zoneid&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;swagger&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;saasregistryenabled&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;endpoints&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;backend&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;timeout&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;sap.cloud.service&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;tenantuiurl&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{UI Endpoint}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Configure Proxy task list parameters" src="/assets/images/Proxy-ae7d19c4c46c9c8b458aa739d3d28492.png" width="3420" height="1258" class="img_ev3q"></p>
</li>
<li>
<p><strong>Schedule Job for polling and processing new mails</strong>
In order to scan the Mailbox for new, unprocessed, E-Mails, a Job needs to be scheduled which runs periodically.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Skip this step if no E-Mail integration is needed</p></div></div>
<p>Executing this step schedules a Job for Report <code>/UBC/DIE_TRIGGER_BY_MAIL</code>. You are free to schedule the Job separately (e.g., via transaction <code>SM36</code>).<br>
<img decoding="async" loading="lazy" alt="Schedule Job" src="/assets/images/ScheduleJob-79f0a1d7278dd5a225b7aa75ad4f3be4.png" width="1236" height="416" class="img_ev3q"><br>
<!-- -->Specify the Information for the Job and especially the Interval the Job will run to scan for new Mails in the configured Mailbox(es). For every unprocessed E-Mail with an Attachment, a Extraction Workflow will be started. Optionally, a Variant can be specified for the Report <code>/UBC/DIE_TRIGGER_BY_MAIL</code> if the default settings are not sufficient for your configuration:
<img decoding="async" loading="lazy" alt="Schedule Job Variant" src="/assets/images/ScheduleJobVariant-bfbaaf7ba97a8a8bb195eaa9057a8a55.png" width="1214" height="397" class="img_ev3q"></p>
<ul>
<li><strong>Proxy restriction</strong>
Optionally you can choose from your configured proxies by each job run. Usually it can stay empty.</li>
<li><strong>Each Attachment own Extraction</strong>
If checked, a Workflow for <strong>every</strong> Attachment within a E-Mail will be started.<!-- -->
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If not checked, you have to specify the Attachment to be considered for the Extraction in your <a href="#use-case-setup">Implementation</a>, method <code>CHOOSE_ATTACHMENT()</code> - needs to be redefined.</p></div></div>
</li>
<li><strong>Folder settings</strong>
Optionally overwrite the Folder settings for processed/unprocessed Folder for the chosen BO (by Proxies). Leave empty to use the <a href="#use-case-setup">BO configuration</a>.</li>
</ul>
</li>
<li>
<p><strong>Check health</strong>
Checks the connectivity for configured proxies (Document Information Extraction and Office365):</p>
<ul>
<li>Validity of SSL certificates</li>
<li>Checks wether Endpoints are reachable</li>
<li>Validity of Credentials</li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Make sure to import missing SSL certificates of your <strong>DIE Endpoint</strong>, <strong>DIE Identity Endpoint</strong>, <strong>O365 Endpoint</strong>, <strong>O365 Identity Endpoint</strong> into your Anonymous PSE (transaction <code>STRUST</code>).<br>
<img decoding="async" loading="lazy" alt="SSL Download" src="/assets/images/SSL_Download-a613526a0707b433c6fa286c7883ccd6.png" width="1258" height="748" class="img_ev3q"><br>
<!-- -->We suggest importing Root certificates.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extraction-results-processing">Extraction results processing<a href="#extraction-results-processing" class="hash-link" aria-label="Direct link to Extraction results processing" title="Direct link to Extraction results processing">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Workflow Protocol" src="/assets/images/WorkflowProtocol-c53ad23101981d571bfb6f53ea905589.png" width="883" height="234" class="img_ev3q"></p>
<p>After the extraction of the Document Information Extraction some post processing/custom process/implementation usually is needed to be triggered in SAP. This can be, for example, automatic creation of sales order/invoice/... and is highly specific to a <a href="#use-case-setup">Use case</a>.<br>
<!-- -->Before the result processing gets triggered, a validity check will be executed over the extraction result checking for the minimum acceptable confidence of the results. This value will be set as part of business object setup supporting your process logic. If at least one of the extraction fields is to be of smaller confidence, then the required minimum the processing will stop with an error message and a manual correction (within <a href="#io-monitoring">I/O monitor</a>), or confirmation will be needed from the assigned users. After the corrections, the processing may continue.</p>
<p><img decoding="async" loading="lazy" alt="Confidence" src="/assets/images/Confidence_error-bea5f4830636c55cf4fe2777620d0837.png" width="1418" height="254" class="img_ev3q"></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="use-case-setup">Use case Setup<a href="#use-case-setup" class="hash-link" aria-label="Direct link to Use case Setup" title="Direct link to Use case Setup">​</a></h3>
<p>As every UBC use case is based on <a href="/products/UBC/BO/documentation">Business objects</a> we need to define one Business Object for every Use case.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The entries will be transported, make sure to have a open Customizing request handy.</p></div></div>
<p>In order to do so:</p>
<ul>
<li>go to transaction <code>/UBC/CUSTOMIZING</code></li>
<li>go to <strong>Business object configuration</strong></li>
<li>create a new entry
<img decoding="async" loading="lazy" alt="Business object setup" src="/assets/images/BusinessObjectSetup-e7c6d4115686b88c6e969db97ead10ce.png" width="1217" height="411" class="img_ev3q">
<ul>
<li><strong>Object type</strong> is completely up to you, choose a meaningful name</li>
<li><strong>Category</strong> needs to be <code>Document Information Extraction</code></li>
<li><strong>BO handler</strong> needs to be a class created for your use case, see below</li>
</ul>
</li>
<li>in the view cluster, go to <strong>Attributes</strong>
<img decoding="async" loading="lazy" alt="Business object Attributes" src="/assets/images/BusinessObjectAttributes-ba12a0ef5b692d8c17b2a15ca3390ac5.png" width="954" height="365" class="img_ev3q">
<ul>
<li><code>CONFIDENCE_THRESHOLD</code> (optional)<br>
<!-- -->If not given, a threshold of 85% will be used. Please see <a href="#extraction-results-processing">Extraction results processing</a> for details. Set to 0 if you want to deactivate thresholds. (not recommended)</li>
<li><code>FOLDER_READ</code> (optional)<br>
<!-- -->If you choose to use the Mail standard implementation, specifiy a folder to read unprocessed e-mails from. Access sub-folders separated by <code>/</code>, e.g. <code>Folder/Subfolder</code>. If not given, the default <code>inbox</code> will be used which refers to the Root of your mailbox.</li>
<li><code>FOLDER_UNREAD</code> (optional)<br>
<!-- -->If you choose to use the Mail standard implementation, you can specifiy a folder to move processed e-mails to. After processing, each mail will be marked as read and optionally moved to a given folder. Access sub-folders separated by <code>/</code>, e.g. <code>Folder/Subfolder</code>. If not given, processed mails will not be moved. Distinguishing between processed/unprocessed then just happens by read and unread Mails.</li>
<li><code>PROXY_DIE</code> (optional)<br>
<!-- -->If you chose to connect multiple Document Information Extraction Endpoints to your System/Client, the use case needs to be linked to a specific <a href="#system-setup">Proxy</a>.<br>
<!-- -->Can remain empty, if there is only one service connected.</li>
<li><code>PROXY_O365</code> (optional)
If you chose to use the Mail standard implementation and connected multiple Mail Endpoints to your System/Client, the use case needs to be linked to a specific <a href="#system-setup">Proxy</a>.<br>
<!-- -->Can remain empty, if there is only one service connected. If there are multiple use cases for Mails, it would be beneficial to have multiple Proxies configured in SAP (technically, no separate mailboxes are needed). Linking your Business Object to a dedicated Proxy allows the assignment of a specific implementation for a new Mail.</li>
<li><code>RESPECT_READ</code> (optional)
If you chose to use the Mail standard implementation and do also want to respect already read E-Mails in your mailbox/folder, set this attribute to <code>X</code>. If empty, only Unread E-Mails in your mailbox/folder will be respected.</li>
<li><code>SCHEMA</code> (<!-- -->❗<!-- --> mandatory)
You need to specify the <a href="#schema">schema</a> you would like to use for your Use case. In order to do so we need the Id of the schema:<!-- -->
<ul>
<li>go to Document Information Extraction UI</li>
<li>in the left menu, choose <strong>Schema configuration</strong></li>
<li>navigate to the desired schema
<img decoding="async" loading="lazy" alt="Schema configuration" src="/assets/images/SchemaConfiguration-65301107beeb6758da923e8a96d59234.png" width="1562" height="826" class="img_ev3q"></li>
<li>in the address bar, inspect the URL. It will look like something like this: <code>&lt;&lt;die_ui_endpoint&gt;&gt;/ui/index.html?clientId=default#/schemaconfiguration&amp;/sc/schemadetail/fbab052e-6f9b-4a5f-b42f-29a8162eb1bf/1/TwoColumnsMidExpanded</code>
We will need the part behind <code>schemadetail</code>, in this example: <code>fbab052e-6f9b-4a5f-b42f-29a8162eb1bf</code></li>
<li>paste the schema id to your attribute value</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>In general, custom implementations will be injected into the process, that will determine what should be done with the results. UBC provides standard implementation for certain usecases for example mapping into <code>QALITY02</code> IDoc structure or creating sales orders.<br>
<!-- -->The implementation differs at some point wether you need a implementation by <a href="#template">template</a> or by use case. Usually, when choosing <strong>standard</strong> <a href="#document-types">document types</a> one implementation for your use case is sufficient. When choosing <strong>custom</strong> <a href="#document-types">document types</a>, it may also be necessary to have dedicated implementations for every chosen <a href="#template">template</a>.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="one-implementation-by-use-case">One implementation by use case<a href="#one-implementation-by-use-case" class="hash-link" aria-label="Direct link to One implementation by use case" title="Direct link to One implementation by use case">​</a></h4>
<p>Subclass the class <code>/UBC/CL_DIE_BO_MAIL_SINGLE</code> for your custom implementation and specify the class name in Business Object handler class (see <a href="#use-case-setup">above</a>).<br>
<!-- -->The method <code>process_result( )</code> is the only abstract method, you are forced to redefine the method. Basically, you will get the Extraction results and all the metadata to do the processing of the Extraction.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="one-implementation-by-template">One implementation by template<a href="#one-implementation-by-template" class="hash-link" aria-label="Direct link to One implementation by template" title="Direct link to One implementation by template">​</a></h4>
<p>Choose the generic Business Object handler class (see <a href="#use-case-setup">above</a>) <code>/UBC/CL_DIE_BO_MAIL</code> (you are free to subclass, if you need some special jump logic, ...).<br>
<!-- -->The logic to be executed will be defined in a post processing class, that will be determined by the extraction&#x27;s template id:</p>
<ul>
<li>go to transaction <code>/UBC/CUSTOMIZING</code></li>
<li>go to <strong>Document Information Extraction/Link Template to Implementation</strong></li>
<li>Create new entries for every handler needed<!-- -->
<ul>
<li><strong>Schema id</strong>
Just reuse the one chosen in <strong>Business Obect Attributes</strong> (see <a href="#use-case-setup">above</a>). Leaving empty means it is valid for all schemas.</li>
<li><strong>Template id</strong>
Specify the template id of your previously created <a href="#template">template</a> in Document Information Extraction UI.<!-- -->
<ul>
<li>go to Document Information Extraction UI</li>
<li>in the left menu, choose <strong>Template</strong></li>
<li>navigate to the desired template
<img decoding="async" loading="lazy" alt="Template configuration" src="/assets/images/TemplateConfiguration-4be26f86c0721b26ec445ecb583eb4ee.png" width="1559" height="462" class="img_ev3q"></li>
<li>in the address bar, inspect the URL. It will look like something like this: <code>&lt;&lt;die_ui_endpoint&gt;&gt;/ui/index.html?clientId=default#/template&amp;/t/templatedetail/1e1d1410-5ad0-4086-a611-a4d4319b3d00</code>
We will need the part behind <code>templatedetail</code>, in this example: <code>1e1d1410-5ad0-4086-a611-a4d4319b3d00</code></li>
<li>paste the template id to the customizing field
Leaving empty means it is valid for all templates (of the given schema).</li>
</ul>
</li>
<li><strong>Class name</strong>
Specify your processing class, implementing the interface <code>/UBC/IF_DIE_POST_PROCESSING</code> (Example implementations given). Basically, you will get the Extraction results and all the metadata to do the processing of the Extraction.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="io-monitoring">I/O Monitoring<a href="#io-monitoring" class="hash-link" aria-label="Direct link to I/O Monitoring" title="Direct link to I/O Monitoring">​</a></h3>
<p>Every message is internally controlled by a <a href="/products/UBC/FLOW/documentation">workflow</a> and monitored with our generic <a href="/products/UBC/IO/documentation">I/O Monitoring</a>.<br>
<!-- -->Go to transaction <code>/UBC/IO</code> and specify the interface name <code>UBC_DIE_MAIL</code>.<br>
<img decoding="async" loading="lazy" alt="I/O Monitoring Overview" src="/assets/images/IOMonitoringOverview-a80a9e9921a14c9a11eb2fff8ff37580.png" width="1918" height="863" class="img_ev3q"></p>
<p>Errors can be restarted or the workflow just acknowledged/quitted.<br>
<!-- -->We further offer some out-of-the-box Jump possibilities:</p>
<ul>
<li>Jump to Document Information Extraction UI
<img decoding="async" loading="lazy" alt="DIE_JUMP" src="/assets/images/DIE_jump-b587dcebcf6bb5a98f6067512f351285.png" width="2134" height="434" class="img_ev3q">
If a manual correction is needed in the extraction results, the document button can be used for each message in the IO monitor. This opens the browser and takes the user directly to the concrete document, where the results can be manually changed and saved. On user save all of the fields will have confidence of 1 meaning 100% because they were edited by a user thus should be correct.<br>
<!-- -->After the changes are saved the message can be restarted in the I/O monitor, this will result in fetching the extraction results again (with the updated values) and continue the processing with the next step.</li>
<li>Jump to original Mail in <a href="/products/UBC/integrations/O365Mail/documentation">O365</a>
<img decoding="async" loading="lazy" alt="EMAIL_JUMP" src="/assets/images/Email_jump-a7caa08feff52a38e05a0621cd1eeac4.png" width="2058" height="438" class="img_ev3q"></li>
<li>Jump to newly created Business Object
<img decoding="async" loading="lazy" alt="QEASY_JUMP" src="/assets/images/Lfcer_jump-898ae1eecd85d4637854a6e9afd266a9.png" width="2060" height="424" class="img_ev3q">
If your post processing implementation creates/changes SAP standard objects (BOR), you can jump to those created Objects.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example-use-cases">Example Use cases<a href="#example-use-cases" class="hash-link" aria-label="Direct link to Example Use cases" title="Direct link to Example Use cases">​</a></h2>
<p>Some example Use cases we implemented earlier.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="purchase-order">Purchase Order<a href="#purchase-order" class="hash-link" aria-label="Direct link to Purchase Order" title="Direct link to Purchase Order">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Purchase Order Overview" src="/assets/images/ProcessingPurchaseOrder-6b11a7cbd213a5a526f1e737d5c34909.png" width="691" height="301" class="img_ev3q"></p>
<p>The goal is to parse and validate a given Purchase Order sent by a customer via E-Mail, to trigger enrichment of purchase order:</p>
<ul>
<li>finding products</li>
<li>derive partners like sales-to, ship-to by address information</li>
<li>...
controlled flexibly via BRF+, include some checks and finally create a sales order.<br>
<!-- -->Clearly the intention is to massively reduce the manual effort of creating sales orders in the SAP system for customers without EDI integration.
The extraction is based on the SAP standard <a href="#schema">schema</a>. No <a href="#template">template</a> creation is needed for this <a href="#document-types">standard document type</a>.<br>
<!-- -->Most beneficial is that the extraction result will be just further enriched with masterdata/BRF+ in the SAP implementation directly.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="purchase-order-extraction-results-processing">Purchase Order Extraction results processing<a href="#purchase-order-extraction-results-processing" class="hash-link" aria-label="Direct link to Purchase Order Extraction results processing" title="Direct link to Purchase Order Extraction results processing">​</a></h4>
<p>After extraction, the <a href="#one-implementation-by-use-case">post processing</a> will be called which basically enriches the data via some BRF+ rules and masterdata.<br>
<!-- -->The extracted, enriched and validated data then will be used to create a sales order directly in SAP using standard APIs called after the enrichment.<br>
<img decoding="async" loading="lazy" alt="Sales Order" src="/assets/images/SalesOrderVA02-dbcf3c232906a2a50141404fb1f4de65.png" width="1654" height="836" class="img_ev3q">
The sales order just gets created with a newly created document type, showing the processing log as a docking container (for the GUI transaction).<br>
<!-- -->The original attachment and mail gets persisted/archived to the sales order itself.</p>
<div class="theme-admonition theme-admonition-success admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>success</div><div class="admonitionContent_BuS1"><p>Using UBC, Document Information Extraction and our SAP integration expertise we implemented a fully integrated &quot;purchase order E-Mail&quot; to SAP sales order solution.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="certificate">Certificate<a href="#certificate" class="hash-link" aria-label="Direct link to Certificate" title="Direct link to Certificate">​</a></h3>
<p>The goal is to parse and validate a certificate sent by a vendor via E-Mail and to trigger automatic inspection lot creation based on that information.<br>
<!-- -->The extraction is based on a custom <a href="#schema">schema</a> and a few <a href="#template">templates</a> in Document Information Extraction.<br>
<!-- -->The extracted data will be mapped to an IDoc of type <code>QALITY02</code>, that will be used as an input for the automatic inspection lot creation.</p>
<p><img decoding="async" loading="lazy" alt="Flow" src="/assets/images/Flow_chart-9660ca14aec43f7e348271a46d115922.png" width="1025" height="277" class="img_ev3q"></p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="certificate-extraction">Certificate Extraction<a href="#certificate-extraction" class="hash-link" aria-label="Direct link to Certificate Extraction" title="Direct link to Certificate Extraction">​</a></h4>
<p>The result should be mapped into an IDoc structure of type <code>QALITY02</code> and for that we will always need to extract certain fields from the certificate regardless of the type or layout. These fields can make their way into a schema belonging to this process. The fields are the following:</p>
<table><thead><tr><th style="text-align:center">Header Fields</th><th style="text-align:center">Suggested Field Name</th><th style="text-align:center">Type</th></tr></thead><tbody><tr><td style="text-align:center">Order number</td><td style="text-align:center">PO_Num</td><td style="text-align:center">string</td></tr><tr><td style="text-align:center">Item number</td><td style="text-align:center">PO_Item_Num</td><td style="text-align:center">string</td></tr><tr><td style="text-align:center">Material number</td><td style="text-align:center">Material</td><td style="text-align:center">string</td></tr></tbody></table>
<table><thead><tr><th style="text-align:center">Line Item Fields</th><th style="text-align:center">Suggested Field Name</th><th style="text-align:center">Type</th></tr></thead><tbody><tr><td style="text-align:center">Name of the characteristic</td><td style="text-align:center">Characteristic_Name</td><td style="text-align:center">string</td></tr><tr><td style="text-align:center">Value of the characteristic</td><td style="text-align:center">Value</td><td style="text-align:center">string</td></tr><tr><td style="text-align:center">Unit of measurement</td><td style="text-align:center">UOM</td><td style="text-align:center">string</td></tr></tbody></table>
<p>The <a href="#schema">schema</a> and <a href="#template">template</a> in Document Information Extraction will be configured accordingly, a custom <a href="#document-types">document type</a> will be used.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="certificate-extraction-results-processin">Certificate Extraction Results processin<a href="#certificate-extraction-results-processin" class="hash-link" aria-label="Direct link to Certificate Extraction Results processin" title="Direct link to Certificate Extraction Results processin">​</a></h4>
<p>After extraction, an IDoc will be used to trigger inspection lot creation with some integrated validity checks as standard.
This mapping and minor validation is handled by custom ABAP classes linked to specific templates, see <a href="#one-implementation-by-template">here</a>.<br>
<!-- -->Specific handlers by template were needed, because of the fact that some vendors send multiple items of different purchase orders in one document that needed to be processed differently. Thanks to the flexbility of UBC, we can make use of ABAP OO and provide some smooth implementations by &quot;template type&quot;.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/products/UBC/integrations/UnibrightONE/documentation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Unibright.ONE</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/products/UBC/integrations/O365Mail/documentation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Microsoft Mail</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#intro" class="table-of-contents__link toc-highlight">Intro</a></li><li><a href="#document-information-extraction" class="table-of-contents__link toc-highlight">Document Information Extraction</a><ul><li><a href="#document-types" class="table-of-contents__link toc-highlight">Document Types</a></li><li><a href="#schema" class="table-of-contents__link toc-highlight">Schema</a></li><li><a href="#template" class="table-of-contents__link toc-highlight">Template</a></li><li><a href="#extraction-in-die-ui---for-testing-purposes" class="table-of-contents__link toc-highlight">Extraction in DIE UI - for testing purposes</a></li></ul></li><li><a href="#ubc" class="table-of-contents__link toc-highlight">UBC</a><ul><li><a href="#trigger" class="table-of-contents__link toc-highlight">Trigger</a></li><li><a href="#system-setup" class="table-of-contents__link toc-highlight">System Setup</a></li><li><a href="#extraction-results-processing" class="table-of-contents__link toc-highlight">Extraction results processing</a></li><li><a href="#use-case-setup" class="table-of-contents__link toc-highlight">Use case Setup</a><ul><li><a href="#one-implementation-by-use-case" class="table-of-contents__link toc-highlight">One implementation by use case</a></li><li><a href="#one-implementation-by-template" class="table-of-contents__link toc-highlight">One implementation by template</a></li></ul></li><li><a href="#io-monitoring" class="table-of-contents__link toc-highlight">I/O Monitoring</a></li></ul></li><li><a href="#example-use-cases" class="table-of-contents__link toc-highlight">Example Use cases</a><ul><li><a href="#purchase-order" class="table-of-contents__link toc-highlight">Purchase Order</a><ul><li><a href="#purchase-order-extraction-results-processing" class="table-of-contents__link toc-highlight">Purchase Order Extraction results processing</a></li></ul></li><li><a href="#certificate" class="table-of-contents__link toc-highlight">Certificate</a><ul><li><a href="#certificate-extraction" class="table-of-contents__link toc-highlight">Certificate Extraction</a></li><li><a href="#certificate-extraction-results-processin" class="table-of-contents__link toc-highlight">Certificate Extraction Results processin</a></li></ul></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://www.metalsxp.com/imprint" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint</a></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.metalsxp.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/mxp.png" alt="metalsXP" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/mxp.png" alt="metalsXP" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2025 Metals Experience GmbH</div></div></div></footer></div>
</body>
</html>