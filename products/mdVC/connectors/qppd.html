<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-mdVC docs-version-current docs-doc-page docs-doc-id-qppd" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">QPPD | metalsXP services</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://metalsxp.services/products/mdVC/connectors/qppd"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="SAP, metalsXP"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-mdVC-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-mdVC-current"><meta data-rh="true" property="og:title" content="QPPD | metalsXP services"><meta data-rh="true" name="description" content="QPPD linkage, master data, and synchronization"><meta data-rh="true" property="og:description" content="QPPD linkage, master data, and synchronization"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://metalsxp.services/products/mdVC/connectors/qppd"><link data-rh="true" rel="alternate" href="https://metalsxp.services/products/mdVC/connectors/qppd" hreflang="en"><link data-rh="true" rel="alternate" href="https://metalsxp.services/products/mdVC/connectors/qppd" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Connectors","item":"https://metalsxp.services/products/mdVC/connectors/"},{"@type":"ListItem","position":2,"name":"QPPD","item":"https://metalsxp.services/products/mdVC/connectors/qppd/"}]}</script><link rel="stylesheet" href="/assets/css/styles.e310121a.css">
<script src="/assets/js/runtime~main.5a929379.js" defer="defer"></script>
<script src="/assets/js/main.4a9c5496.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/mxp.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/mxp.png" alt="mXP" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32"><img src="/img/mxp.png" alt="mXP" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32"></div><b class="navbar__title text--truncate">services</b></a><a class="navbar__item navbar__link" href="/products/UBC">UBC</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/products/mdVC">mdVC</a><a class="navbar__item navbar__link" href="/products/QPPD/GRO">QPPD-GRO</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" target="_self" href="/"><img src="/img/mxp.png" alt="mXP" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32"><img src="/img/mxp.png" alt="mXP" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32"><b>services</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/products/mdVC">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/products/mdVC/setup">Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/products/mdVC/usage">Usage</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/products/mdVC/connectors">Connectors</a><button aria-label="Collapse sidebar category &#x27;Connectors&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/products/mdVC/connectors/brf">BRF+ rules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/products/mdVC/connectors/cds">CDS views</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/products/mdVC/connectors/qppd">QPPD</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/products/mdVC/connectors"><span>Connectors</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">QPPD</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>QPPD</h1></header>
<p><a href="https://qppd.info" target="_blank" rel="noopener noreferrer">QPPD</a> serves as a data modeling tool for master data and can also function as a central data hub hosting complex objects based on configuration values, such as the &quot;technical order&quot; for order dressing. This page explains how to link QPPD elements to characteristics and/or link QPPD objects to a configuration instance (both ways). Enhance your configuration logic and behavior with QPPD to elevate it to the next level.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="characteristic-links">Characteristic Links<a href="#characteristic-links" class="hash-link" aria-label="Direct link to Characteristic Links" title="Direct link to Characteristic Links">​</a></h2>
<p>When using QPPD to maintain master data, both elements and their values are typically managed directly within QPPD.<br>
<img decoding="async" loading="lazy" alt="Product Form values" src="/assets/images/image_005-4c571b76ce3d34e6d448efda455531ee.png" width="1027" height="305" class="img_ev3q"></p>
<p>In the AVC context, a characteristic must exist beforehand to be included in a configuration model. For example, the characteristic <code>PRODUCT_FORM</code> needs to be created and added to the model.</p>
<p>Maintaining characteristic values in both AVC and QPPD is inefficient and error-prone. Therefore, QPPD should act as the single source of truth.</p>
<p>To support this, <strong>mdVC</strong> includes a pre-delivered implementation of the BADI <code>vch_hl_es_core-vch_hl_md_domain_modify</code>, which uses the class <code>/mxp/vcha_cl_qppd_domain_modif</code>. This implementation checks whether a matching QPPD element exists for a given characteristic and, if so, supplies the QPPD-defined values for configuration use at runtime.<br>
<!-- -->Make sure to define suitable filter values when setting up the BADI.</p>
<p><img decoding="async" loading="lazy" alt="BADI implementation" src="/assets/images/image_010-90c006a59c8b29a92e8f6e3422dfcfd5.png" width="1236" height="465" class="img_ev3q"></p>
<p>With this setup, there is no need to duplicate value maintenance in the characteristic itself — QPPD remains authoritative. However, the characteristic still needs to exist in the system to be added to the configuration model.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="specification-links">Specification Links<a href="#specification-links" class="hash-link" aria-label="Direct link to Specification Links" title="Direct link to Specification Links">​</a></h2>
<p>For complex calculations such as order dressing, calculating production alternatives, or other computations, it is beneficial to integrate and mirror some AVC values into QPPD in a separate Specification usually called a &quot;Technical Order.&quot; This integration enables seamless, bidirectional synchronization of characteristic values between AVC and QPPD while ensuring configuration logic remains consistent and centrally governed in mdVC by reusing QPPD logic.</p>
<p>Due to the stateless nature of AVC and to allow users to modify specification values in QPPD, sophisticated draft handling is necessary. The draft handling described here focuses on sales documents where it&#x27;s mandatory (sales document processing in SAP is stateful, AVC is stateless).</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="synchronization-process">Synchronization Process<a href="#synchronization-process" class="hash-link" aria-label="Direct link to Synchronization Process" title="Direct link to Synchronization Process">​</a></h3>
<!-- -->
<p>The following sections focuses on the key steps related to QPPD synchronization.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="synchronization-trigger-and-target">Synchronization Trigger and Target<a href="#synchronization-trigger-and-target" class="hash-link" aria-label="Direct link to Synchronization Trigger and Target" title="Direct link to Synchronization Trigger and Target">​</a></h4>
<p>The initial synchronization is a <a href="/products/mdVC/usage#task">task</a> passed to the engine:</p>
<div class="language-abap codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-abap codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> /mxp/vcha_cl_qp_va_sync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>In the standard implementation, log messages are synchronized back to AVC. Consider the <a href="/products/mdVC/usage#best-practice">Best practice</a> to derive status after QPPD synchronization completes.</p></div></div>
<p>The enhancement spot <code>/mxp/vcha_es_qp_sync</code> controls synchronization: configurations for QPPD specification types, synchronization object type definitions, and status definitions.</p>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="document-configuration">Document Configuration<a href="#document-configuration" class="hash-link" aria-label="Direct link to Document Configuration" title="Direct link to Document Configuration">​</a></h5>
<p>To prevent issues like late numbering and manage &quot;out-of-date&quot; draft objects, two custom fields are required at the SAP sales order header level:</p>
<ul>
<li>
<p><strong>Header Id</strong><br>
<!-- -->A &quot;Character 22&quot; field storing a unique header ID. It is filled immediately after sales order creation and never changed.</p>
</li>
<li>
<p><strong>Activation Session Timestamp</strong><br>
<!-- -->A timestamp field filled at the start of a sales order session. Internally used by the QPPD draft implementation to detect outdated drafts. Must be of type <code>timestampl</code>.</p>
</li>
</ul>
<p>Best practice in S/4 systems is to use the &quot;Custom Fields&quot; app (<code>#CustomField-manage</code>). For older releases, extend via developer extensibility. Only the Custom Fields app is considered clean-core compliant here.<br>
<img decoding="async" loading="lazy" alt="Custom fields" src="/assets/images/image_015-c10f1378cb2f603c320ec3faa1c037c4.png" width="1871" height="285" class="img_ev3q"></p>
<p>Recommended field names are <code>ZZ1_HeaderId</code> and <code>ZZ1_ActivationSession</code>. If these conflict with your naming conventions, implement the BADI <code>/mxp/vcha_doc_link_config</code> to configure custom fields.</p>
<p><img decoding="async" loading="lazy" alt="BADI /mxp/vcha_doc_link_config" src="/assets/images/image_016-bb5d14fe1e017523ad2bca78592e7c66.png" width="1231" height="484" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The logic for these fields is delivered with mdVC, but the fields themselves are not (to remain clean core compliant).</p></div></div>
<p>The method <code>get_header_fields</code> must be implemented:</p>
<div class="language-abap codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-abap codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">method</span><span class="token plain"> /mxp/vcha_if_doc_link_config</span><span class="token token-operator punctuation" style="color:#393A34">~</span><span class="token plain">get_header_fields</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  e_header_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ZZ1_HeaderId&#x27;</span><span class="token plain"> ##NO_TEXT</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  e_activation_session_ts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ZZ1_ActivationSession&#x27;</span><span class="token plain"> ##NO_TEXT</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">endmethod</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="synchronization-configuration">Synchronization Configuration<a href="#synchronization-configuration" class="hash-link" aria-label="Direct link to Synchronization Configuration" title="Direct link to Synchronization Configuration">​</a></h5>
<p>The target QPPD object must be defined. The BADI <code>/mxp/vcha_qp_sync_vart_config</code> configures the specification type, target object type, and follow-up actions on the QPPD object after synchronization. The method <code>get_configuration</code> must be implemented; configuration can be plant-specific.<br>
<img decoding="async" loading="lazy" alt="get_configuration()" src="/assets/images/image_017-68d3c38fbe61e66eecdf3f764b55981c.png" width="706" height="343" class="img_ev3q"></p>
<p><strong>Specification Type Contract</strong></p>
<ul>
<li>No Specification Group should be assigned in Specification Type Customizing.<br>
<img decoding="async" loading="lazy" alt="Specification Group" src="/assets/images/image_018-cba449eff2d03aa8ed020ff94518d7ea.png" width="1165" height="655" class="img_ev3q"></li>
<li>An Object Type at header level must be assigned, listing all elements whose characteristics need synchronization from AVC instance. <strong>The names must match.</strong><br>
<img decoding="async" loading="lazy" alt="Object Type" src="/assets/images/image_019-e27c229aae6444f7b18457b2d033adbe.png" width="856" height="361" class="img_ev3q"><br>
<!-- -->All configuration values synchronize first to this object type, triggering follow-up actions.</li>
<li>Builder, Generation, and Follow-Up functions can be freely defined in QPPD style and configured within the BADI. They execute whenever a relevant synchronization element changes.</li>
<li>The status schema must follow the <a href="#status-configuration">Status Configuration</a> described below.</li>
</ul>
<p><strong>Method Implementation</strong></p>
<p>The implementation may be plant-specific. A default implementation is provided:</p>
<ul>
<li>
<p><strong>Specification Type:</strong><br>
<!-- -->Defaults to the QPPD Technical Order looked up by abbreviation <code>TO</code> in Specification Type Customizing.</p>
</li>
<li>
<p><strong>Object Type:</strong><br>
<!-- -->Default implementation links to <code>MDVC_CONFIG</code>; keep this name if using the default.</p>
</li>
<li>
<p><strong>Key Parts VC:</strong><br>
<!-- -->The QPPD object is linked by its Name. The default derives the name from a characteristic <code>MDVC_LINK_VNAME</code>. This value must be determined by a task before the actual QPPD synchronization. This is where the configured header ID is used.</p>
<ul>
<li>
<p><code>VBAK_Z_UUID</code> (customizable name) holds the header ID defined in <a href="#document-configuration">Document Configuration</a>, made available to AVC since it only accesses configuration values.<br>
<img decoding="async" loading="lazy" alt="UUID Characteristic" src="/assets/images/image_021-958cdf1f5ad543dda6bb3462ee083574.png" width="828" height="695" class="img_ev3q"><br>
<img decoding="async" loading="lazy" alt="UUID Link" src="/assets/images/image_022-a1cc49ba4953135d75f2a4642e056630.png" width="779" height="475" class="img_ev3q"></p>
</li>
<li>
<p><code>POSNR</code> (customizable name) holds the sales order item number, also exposed to AVC.<br>
<img decoding="async" loading="lazy" alt="POSNR Link" src="/assets/images/image_023-cb7bf3e0e4c0f5a30b9daf05d8f5e80d.png" width="816" height="312" class="img_ev3q"></p>
</li>
<li>
<p><code>MDVC_LINK_VNAME</code> is calculated by a custom task.<br>
<img decoding="async" loading="lazy" alt="MDVC_LINK_VNAME" src="/assets/images/image_020-1ba17e8823749b9162301abfe1eec932.png" width="813" height="749" class="img_ev3q"></p>
</li>
</ul>
</li>
</ul>
<p>Example task configuration showing that <code>lcl_calc_mdvc_link_vname</code> runs before QPPD synchronization:</p>
<div class="language-abap codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-abap codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/mxp/vcha_cl_va_engine</span><span class="token token-operator punctuation" style="color:#393A34">=&gt;</span><span class="token plain">factory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  i_badi_implementation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> me</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  i_explosion_date      </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ref</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> explosion_date </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  i_hierarchy           </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ref</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> hierarchy </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  i_characteristics     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ref</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> characteristics </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  i_values              </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ref</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">values</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  i_bill_of_materials   </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ref</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> bill_of_materials </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  i_assign_by_value     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ref</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> assign_by_value </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  i_assign_by_key       </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ref</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> assign_by_key </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  i_unassign            </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ref</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unassign</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">-&gt;process</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> /mxp/vcha_cl_va_task_composite</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> lcl_calc_mdvc_link_vname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> /mxp/vcha_cl_qp_va_sync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> /mxp/vcha_cl_va_log_to_status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre></div></div>
<p>Example implementation of <code>lcl_calc_mdvc_link_vname</code>:</p>
<div class="language-abap codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-abap codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> lcl_calc_mdvc_link_vname </span><span class="token keyword" style="color:#00009f">definition</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">create</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">inheriting</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> /mxp/vcha_cl_va_task_simple</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">section</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">methods</span><span class="token plain"> /mxp/vcha_if_va_task</span><span class="token token-operator punctuation" style="color:#393A34">~</span><span class="token plain">execute </span><span class="token keyword" style="color:#00009f">redefinition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">endclass</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> lcl_calc_mdvc_link_vname </span><span class="token keyword" style="color:#00009f">implementation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">method</span><span class="token plain"> /mxp/vcha_if_va_task</span><span class="token token-operator punctuation" style="color:#393A34">~</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">l_z_uuid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> i_engine</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">m_container</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">get_assigned_value_for_cstic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      i_engine</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">m_container</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">get_characteristic_by_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> i_instance_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> i_engine</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">m_container</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">m_root_instance_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                         i_cstic_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;VBAK_Z_UUID&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">-&gt;key </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">l_posnr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> i_engine</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">m_container</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">get_assigned_value_for_cstic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      i_engine</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">m_container</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">get_characteristic_by_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> i_instance_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> i_engine</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">m_container</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">m_root_instance_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                         i_cstic_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;POSNR&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">-&gt;key </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">check</span><span class="token plain"> l_z_uuid </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">bound</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> l_posnr </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">bound</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i_engine</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">m_container</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">assign_value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">base</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">corresponding</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> i_engine</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">m_container</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">get_characteristic_by_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> i_instance_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> i_engine</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">m_container</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">m_root_instance_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                                                                           i_cstic_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;MDVC_LINK_VNAME&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">-&gt;key </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                  value_string </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> /mxp/vcha_cl_qp_sd_key_util</span><span class="token token-operator punctuation" style="color:#393A34">=&gt;</span><span class="token plain">instance</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">key_for_item</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                   i_header_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> l_z_uuid</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">value_string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                   i_item      </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">conv</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> l_posnr</span><span class="token token-operator punctuation" style="color:#393A34">-&gt;</span><span class="token plain">value_int_min </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">endmethod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">endclass</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You can skip calculating <code>MDVC_LINK_VNAME</code> and instead concatenate via BADI settings (simpler but less flexible). At least a separate characteristic is needed for the <a href="#ui-extension">AVC UI extension</a> which is why we decided to recommend this way.</p></div></div>
<ul>
<li><strong>Define follow-up actions</strong> executed after any relevant configuration value change (object created or modified):<!-- -->
<ul>
<li>Builder flag: whether to execute QPPD Builder</li>
<li>Generation flag: whether to suppress QPPD Global Generation</li>
<li>Action name: which specific <strong>VART function</strong> to execute (see <a href="https://qppd.info/doc" target="_blank" rel="noopener noreferrer">QPPD docs</a>)</li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="status-configuration">Status Configuration<a href="#status-configuration" class="hash-link" aria-label="Direct link to Status Configuration" title="Direct link to Status Configuration">​</a></h5>
<p>Multiple instances of a QPPD object for a configuration instance can exist. The objects are not versioned but are distinguished by their status. All share the same Name, as defined in <a href="#synchronization-configuration">Synchronization configuration</a>. The BADI <code>/mxp/vcha_qp_draft_status_conf</code> is used to configure the different statuses.<br>
<img decoding="async" loading="lazy" alt="BADI interface draft status config" src="/assets/images/image_024-d80e874886002c6952eccc2e9801322a.png" width="741" height="380" class="img_ev3q"><br>
<!-- -->A default implementation is provided by <code>/mxp/vcha_cl_qp_draft_stat_cfg</code>.</p>
<ul>
<li>
<p><strong>Draft object</strong><br>
<!-- -->The draft object exists &quot;within a configuration&quot; and can be discarded or adapted on each change.<br>
<!-- -->The default implementation creates the object with status <code>IZQER</code> (in creation).</p>
</li>
<li>
<p><strong>Draft object &quot;to be released&quot;</strong><br>
<!-- -->A draft object moves to &quot;to be released&quot; after the &quot;Done&quot; button is pressed in AVC, meaning it will be saved when the sales order is saved.<br>
<!-- -->The default implementation configures activity <code>ZQFB</code> (&quot;release requested&quot;) to be executed, setting status <code>IZQFB</code> according to status customizing.</p>
</li>
<li>
<p><strong>Active object</strong><br>
<!-- -->A draft object &quot;to be released&quot; is promoted to &quot;active&quot; after saving the sales order as a post-processing step.<br>
<!-- -->Sales Order change events are fired by SAP standard, triggering class <code>/mxp/vcha_cl_qp_slo_evt_activ</code> as standard <code>BGPF</code>.<br>
<!-- -->The default implementation configures activity <code>ZQFR</code> (&quot;release&quot;) to be executed, setting status <code>IZQFR</code> according to status customizing.</p>
</li>
<li>
<p><strong>Inactive object</strong> (previously active, but replaced)<br>
<!-- -->An active object is marked inactive if another draft object &quot;to be released&quot; becomes active.<br>
<!-- -->The default implementation configures activity <code>ZQLO</code> (&quot;mark for deletion&quot;) to be executed, setting status <code>IZQLO</code> according to status customizing.</p>
</li>
</ul>
<p>The default implementation must match the status schema of the configured Specification Type:</p>
<div class="language-abap codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-abap codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">method</span><span class="token plain"> /mxp/vcha_if_qp_draft_stat_cfg</span><span class="token token-operator punctuation" style="color:#393A34">~</span><span class="token plain">get_configuration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  r_result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> draft </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> /sct/qp_cl_const</span><span class="token token-operator punctuation" style="color:#393A34">=&gt;</span><span class="token plain">status</span><span class="token token-operator punctuation" style="color:#393A34">-</span><span class="token plain">in_creation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                       pending </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> /sct/qp_cl_const</span><span class="token token-operator punctuation" style="color:#393A34">=&gt;</span><span class="token plain">status</span><span class="token token-operator punctuation" style="color:#393A34">-</span><span class="token plain">release_requested</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                          activities</span><span class="token token-operator punctuation" style="color:#393A34">-</span><span class="token plain">promote_to_active </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> /sct/qp_cl_const</span><span class="token token-operator punctuation" style="color:#393A34">=&gt;</span><span class="token plain">activity</span><span class="token token-operator punctuation" style="color:#393A34">-</span><span class="token plain">release </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                       activities </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> initialize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                             promote_to_pending </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> /sct/qp_cl_const</span><span class="token token-operator punctuation" style="color:#393A34">=&gt;</span><span class="token plain">activity</span><span class="token token-operator punctuation" style="color:#393A34">-</span><span class="token plain">request_release </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      active </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> /sct/qp_cl_const</span><span class="token token-operator punctuation" style="color:#393A34">=&gt;</span><span class="token plain">status</span><span class="token token-operator punctuation" style="color:#393A34">-</span><span class="token plain">released</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        </span><span class="token keyword" style="color:#00009f">inactive</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> /sct/qp_cl_const</span><span class="token token-operator punctuation" style="color:#393A34">=&gt;</span><span class="token plain">status</span><span class="token token-operator punctuation" style="color:#393A34">-</span><span class="token plain">marked_for_deletion </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        activities </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> #</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> deactivate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> /sct/qp_cl_const</span><span class="token token-operator punctuation" style="color:#393A34">=&gt;</span><span class="token plain">activity</span><span class="token token-operator punctuation" style="color:#393A34">-</span><span class="token plain">delete </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">endmethod</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="synchronization-back">Synchronization Back<a href="#synchronization-back" class="hash-link" aria-label="Direct link to Synchronization Back" title="Direct link to Synchronization Back">​</a></h4>
<p>Because the structure of a source QPPD object may vary a lot between use cases, no BADI is provided <strong>currently</strong> for synchronization back. Instead, the method <code>SYNCH_BACK_TO_VC</code> in the task class <code>/mxp/vcha_cl_qp_va_sync</code> is available for redefinition according to custom use cases. Additionally, all error messages within the object hierarchy will be synchronized to the AVC log, influencing status in the default handling (task <code>/mxp/vcha_cl_va_log_to_status</code>).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="finish-configuration">Finish Configuration<a href="#finish-configuration" class="hash-link" aria-label="Direct link to Finish Configuration" title="Direct link to Finish Configuration">​</a></h4>
<p>Once the configuration is finished by clicking <strong>Done</strong>, the AVC BADI <code>vch_hl_on_save</code> is triggered. The class <code>/mxp/vcha_cl_qp_on_save</code> can be added for a BADI implementation. It handles promoting the draft to the status &quot;to be released&quot;.<br>
<img decoding="async" loading="lazy" alt="BADI vch_hl_on_save" src="/assets/images/image_025-e42745d1a2a1ad6e21ed18084283847a.png" width="1227" height="470" class="img_ev3q"><br>
<!-- -->This status serves as an intermediate state while processing the sales document.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="post-processing-release-qppd-draft">Post-Processing: Release QPPD Draft<a href="#post-processing-release-qppd-draft" class="hash-link" aria-label="Direct link to Post-Processing: Release QPPD Draft" title="Direct link to Post-Processing: Release QPPD Draft">​</a></h4>
<p>As a post processing after saving the sales documents, all linked objects in status &quot;to be released&quot; will be promoted to &quot;released&quot;. The Activation Session Timestamp will be considered, so that only relevant ones will be promoted:</p>
<ul>
<li>The Activation Session Timestamp will be calculated once an object in status &quot;to be released&quot; exists for the document, but the timestamp is the beginning of the editing session, not the current one.</li>
<li>On Save, all objects which &quot;last update&quot; timestamp is higher than the Activation Session Timestamp will be considered as &quot;to be promoted&quot;.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Objects which have errors will not be promoted to released nor considered as obsolete. They wait for manual editing (as the configuration does).</p></div></div>
<ul>
<li>The relevant objects will be changed to &quot;released&quot;.</li>
</ul>
<p>If any error occurs, the standard <code>BGPF</code> unit will fail. Details are available in the standard transaction <code>SBGRFCMON</code>. For more sophisticated logic, consider using an <a href="https://ubc.services/IO/documentation" target="_blank" rel="noopener noreferrer">UBC interface</a> instead.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="delete-obsolete-objects">Delete obsolete Objects<a href="#delete-obsolete-objects" class="hash-link" aria-label="Direct link to Delete obsolete Objects" title="Direct link to Delete obsolete Objects">​</a></h4>
<p>Scheduled as a regular job, the previously mentioned conditions will be checked and all drafts older than the specified lifetime will be deleted (e.g., incomplete configurations, cancelled editing sessions, etc.).</p>
<p><img decoding="async" loading="lazy" alt="Application Job for QPPD draft cleanup" src="/assets/images/image_026-c8996ede0a6d44a8adf4c983ef9e6ec3.png" width="1865" height="197" class="img_ev3q"></p>
<ul>
<li>Open the Fiori App for Application Jobs (#ApplicationJob-show).</li>
<li>Create a new Application Job based on the template <code>/mxp/vcha_qp_draft_cleanup</code>.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Job Template /mxp/vcha_qp_draft_cleanup" src="/assets/images/image_027-1ba0cde1b01257b9108ca9dc87ee446b.png" width="1526" height="442" class="img_ev3q"></p>
<ul>
<li>Choose a recurrence pattern; our recommendation is to schedule it once a day, which is sufficient.</li>
<li>Choose a lifetime of drafts in seconds; our recommendation is about <code>86,400</code> (one day), meaning all obsolete drafts older than a day will be deleted.</li>
<li>The specification type will be defaulted with all your specification types according to the BADI implementation. From a default implementation perspective, this means &quot;all Technical Orders&quot;.</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ui-extension">UI Extension<a href="#ui-extension" class="hash-link" aria-label="Direct link to UI Extension" title="Direct link to UI Extension">​</a></h3>
<p>AVC provides a powerful UI extension approach, enabling, for example, the display of linked QPPD objects as a dedicated tab &quot;group&quot; in AVC. For more information on AVC UI extensions, see <a href="https://help.sap.com/docs/SAP_S4HANA_CLOUD/f369b2eff700401494ba6e7c9a573288/931576a8470e479ca11ca0b18d655092.html?locale=en-US" target="_blank" rel="noopener noreferrer">SAP Help</a> and <a href="https://github.com/SAP-samples/s4hana-avc-ui-extension-template" target="_blank" rel="noopener noreferrer">GitHub</a>.</p>
<p><img decoding="async" loading="lazy" alt="UI Extension" src="/assets/images/image_029-c15c7e31ab61b903ab404642a847e664.png" width="1903" height="574" class="img_ev3q"></p>
<p>In brief, to display information of the linked QPPD object, the following configuration/development steps are required:</p>
<ul>
<li>Develop your UI extension app as linked in the <a href="https://github.com/SAP-samples/s4hana-avc-ui-extension-template" target="_blank" rel="noopener noreferrer">GitHub Repository</a>.</li>
<li>Register an AVC UI extension and assign a name with Fiori app <code>#VarCnfUserInterfaceExtension-manage</code></li>
<li>Define the characteristic groups for your configuration model in Fiori app <code>#VariantConfiguration-manageGroups</code> and assign characteristics.<!-- -->
<ul>
<li>Make sure to add at least one characteristic; otherwise, the tab remains hidden.</li>
<li>It is recommended to calculate the linked specification name as a separate characteristic, as mentioned in <a href="#synchronization-configuration">Synchronization configuration</a>, and add it to this group. The UI extension can then access this value and display the object&#x27;s values by filtering on it.</li>
</ul>
</li>
<li>Link the UI extension to this group by specifying your View Extension name in group header.</li>
<li>Assign the characteristic group to the configuration profile in Fiori app <code>#VariantConfiguration-assignGroupsToProfile</code>.</li>
</ul>
<p>For implementing your AVC UI extension:</p>
<ul>
<li>
<p>Best practice is to expose parts of the QPPD object with OData and use Fiori Elements for displaying it.<br>
<!-- -->Consider using <a href="/products/QPPD/GRO/GDD/documentation">GDD</a> to generate semantic-rich CDS views as a basis for the custom Consumption View.</p>
</li>
<li>
<p>Be aware that draft objects must <strong>not</strong> be displayed in display mode, only in editing mode.</p>
</li>
<li>
<p>Unfortunately, it is not supported from the AVC UI Extension side to embed external UI5 libraries, thus it is currently not possible to offer a library for helper functions such as:</p>
<ul>
<li>Jump to QPPD</li>
<li>Display QPPD objects inline: UI and draft handling<br>
<img decoding="async" loading="lazy" alt="Display QPPD object" src="/assets/images/image_030-967eb0401dc07851398e8c17911a2794.png" width="1888" height="858" class="img_ev3q"></li>
<li>...</li>
</ul>
<p>Nevertheless, <strong>metals<sup>XP</sup></strong> has some content available &quot;pre-packaged&quot;. The current suggestion is to copy it as a &quot;quick start&quot; to your custom Extension project. This may change in the future if libraries become supported.</p>
</li>
</ul>
<p>💬 Please reach out to the team of <strong>metals<sup>XP</sup></strong> for further details.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="setup-summary">Setup Summary<a href="#setup-summary" class="hash-link" aria-label="Direct link to Setup Summary" title="Direct link to Setup Summary">​</a></h3>
<ul>
<li>Add custom fields for &quot;Header Id&quot; and &quot;Activation Session Timestamp&quot; as described in <a href="#document-configuration">Document configuration</a>.</li>
<li>Perform QPPD and configuration customizing as described in <a href="#synchronization-configuration">Synchronization configuration</a> and <a href="#status-configuration">Status configuration</a>.</li>
<li>Add the synchronization task to QPPD as per <a href="#synchronization-configuration">Synchronization configuration</a>.</li>
<li>Implement the BADI for promoting the draft as described in <a href="#finish-configuration">Finish Configuration</a>.</li>
<li>Schedule the regular job for deleting obsolete objects as described in <a href="#delete-obsolete-objects">Delete obsolete Objects</a>.</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/products/mdVC/connectors/cds"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">CDS views</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#characteristic-links" class="table-of-contents__link toc-highlight">Characteristic Links</a></li><li><a href="#specification-links" class="table-of-contents__link toc-highlight">Specification Links</a><ul><li><a href="#synchronization-process" class="table-of-contents__link toc-highlight">Synchronization Process</a><ul><li><a href="#synchronization-trigger-and-target" class="table-of-contents__link toc-highlight">Synchronization Trigger and Target</a><ul><li><a href="#document-configuration" class="table-of-contents__link toc-highlight">Document Configuration</a></li><li><a href="#synchronization-configuration" class="table-of-contents__link toc-highlight">Synchronization Configuration</a></li><li><a href="#status-configuration" class="table-of-contents__link toc-highlight">Status Configuration</a></li></ul></li><li><a href="#synchronization-back" class="table-of-contents__link toc-highlight">Synchronization Back</a></li><li><a href="#finish-configuration" class="table-of-contents__link toc-highlight">Finish Configuration</a></li><li><a href="#post-processing-release-qppd-draft" class="table-of-contents__link toc-highlight">Post-Processing: Release QPPD Draft</a></li><li><a href="#delete-obsolete-objects" class="table-of-contents__link toc-highlight">Delete obsolete Objects</a></li></ul></li><li><a href="#ui-extension" class="table-of-contents__link toc-highlight">UI Extension</a></li><li><a href="#setup-summary" class="table-of-contents__link toc-highlight">Setup Summary</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://www.metalsxp.com/imprint" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint</a></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.metalsxp.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/mxp.png" alt="metalsXP" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/mxp.png" alt="metalsXP" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2025 Metals Experience GmbH</div></div></div></footer></div>
</body>
</html>